{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{query,collection,getDocs}from\"firebase/firestore\";import{firestore}from\"../firebase/clientApp\";import React,{useEffect,useState}from\"react\";import CreateTaskPanel from\"./CreateTaskPanel\";import useTasks from\"../hooks/useTasks\";import TaskCard from\"./TaskCard\";import{Stack}from\"@mui/material\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TaskPage=function TaskPage(){var _useTasks=useTasks(),tasksStateValue=_useTasks.tasksStateValue,setTasksStateValue=_useTasks.setTasksStateValue,onDeleteTask=_useTasks.onDeleteTask;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var getTasks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var tasksQuery,taskDocs,tasks;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;tasksQuery=query(collection(firestore,\"tasks\"));_context.next=4;return getDocs(tasksQuery);case 4:taskDocs=_context.sent;tasks=taskDocs.docs.map(function(doc){return _objectSpread({id:doc.id},doc.data());});setTasksStateValue(function(prev){return _objectSpread(_objectSpread({},prev),{},{allTasks:tasks});});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(\"getTasks() error\",_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function getTasks(){return _ref.apply(this,arguments);};}();useEffect(function(){getTasks();},[]);useEffect(function(){getTasks();},[tasksStateValue]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(CreateTaskPanel,{}),/*#__PURE__*/_jsx(Stack,{alignItems:'center',spacing:2,marginTop:2,children:tasksStateValue.allTasks.map(function(item){return/*#__PURE__*/_jsx(TaskCard,{task:item,onDeleteTask:onDeleteTask},item.id);})})]});};export default TaskPage;","map":{"version":3,"names":["query","collection","getDocs","firestore","React","useEffect","useState","CreateTaskPanel","useTasks","TaskCard","Stack","TaskPage","tasksStateValue","setTasksStateValue","onDeleteTask","loading","setLoading","getTasks","tasksQuery","taskDocs","tasks","docs","map","doc","id","data","prev","allTasks","console","log","item"],"sources":["C:/Users/willi/Desktop/Web Projects/Impactly/my-app/src/components/TaskPage.tsx"],"sourcesContent":["import { query, collection, getDocs } from \"firebase/firestore\";\r\nimport { firestore } from \"../firebase/clientApp\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport CreateTaskPanel from \"./CreateTaskPanel\";\r\nimport useTasks from \"../hooks/useTasks\";\r\nimport { Task } from \"../atoms/TasksAtom\";\r\nimport TaskCard from \"./TaskCard\";\r\nimport { Container, Stack } from \"@mui/material\";\r\n\r\ntype TaskPageProps = {};\r\n\r\nconst TaskPage: React.FC<TaskPageProps> = () => {\r\n  const { tasksStateValue, setTasksStateValue, onDeleteTask } = useTasks();\r\n  const [loading, setLoading] = useState(false);\r\n  const getTasks = async () => {\r\n    try {\r\n      const tasksQuery = query(collection(firestore, \"tasks\"));\r\n      const taskDocs = await getDocs(tasksQuery);\r\n      const tasks = taskDocs.docs.map((doc) => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n      }));\r\n\r\n      setTasksStateValue((prev) => ({\r\n        ...prev,\r\n        allTasks: tasks as unknown as Task[],\r\n      }));\r\n    } catch (error: any) {\r\n      console.log(\"getTasks() error\", error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    getTasks();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    getTasks();\r\n  }, [tasksStateValue]);\r\n  return (\r\n    <>\r\n      <CreateTaskPanel />\r\n      <Stack alignItems={'center'} spacing = {2} marginTop ={2}>\r\n        {tasksStateValue.allTasks.map((item) => (\r\n          <TaskCard key = {item.id} task={item} onDeleteTask={onDeleteTask}></TaskCard>\r\n        ))}\r\n      </Stack>\r\n    </>\r\n  );\r\n};\r\nexport default TaskPage;\r\n"],"mappings":"mjBAAA,OAASA,KAAT,CAAgBC,UAAhB,CAA4BC,OAA5B,KAA2C,oBAA3C,CACA,OAASC,SAAT,KAA0B,uBAA1B,CACA,MAAOC,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAOC,gBAAP,KAA4B,mBAA5B,CACA,MAAOC,SAAP,KAAqB,mBAArB,CAEA,MAAOC,SAAP,KAAqB,YAArB,CACA,OAAoBC,KAApB,KAAiC,eAAjC,C,6IAIA,GAAMC,SAAiC,CAAG,QAApCA,SAAoC,EAAM,CAC9C,cAA8DH,QAAQ,EAAtE,CAAQI,eAAR,WAAQA,eAAR,CAAyBC,kBAAzB,WAAyBA,kBAAzB,CAA6CC,YAA7C,WAA6CA,YAA7C,CACA,cAA8BR,QAAQ,CAAC,KAAD,CAAtC,wCAAOS,OAAP,eAAgBC,UAAhB,eACA,GAAMC,SAAQ,4FAAG,mLAEPC,UAFO,CAEMlB,KAAK,CAACC,UAAU,CAACE,SAAD,CAAY,OAAZ,CAAX,CAFX,uBAGUD,QAAO,CAACgB,UAAD,CAHjB,QAGPC,QAHO,eAIPC,KAJO,CAICD,QAAQ,CAACE,IAAT,CAAcC,GAAd,CAAkB,SAACC,GAAD,wBAC9BC,EAAE,CAAED,GAAG,CAACC,EADsB,EAE3BD,GAAG,CAACE,IAAJ,EAF2B,GAAlB,CAJD,CASbZ,kBAAkB,CAAC,SAACa,IAAD,wCACdA,IADc,MAEjBC,QAAQ,CAAEP,KAFO,IAAD,CAAlB,CATa,+EAcbQ,OAAO,CAACC,GAAR,CAAY,kBAAZ,cAda,oEAAH,kBAARZ,SAAQ,0CAAd,CAkBAZ,SAAS,CAAC,UAAM,CACdY,QAAQ,GACT,CAFQ,CAEN,EAFM,CAAT,CAIAZ,SAAS,CAAC,UAAM,CACdY,QAAQ,GACT,CAFQ,CAEN,CAACL,eAAD,CAFM,CAAT,CAGA,mBACE,wCACE,KAAC,eAAD,IADF,cAEE,KAAC,KAAD,EAAO,UAAU,CAAE,QAAnB,CAA6B,OAAO,CAAI,CAAxC,CAA2C,SAAS,CAAG,CAAvD,UACGA,eAAe,CAACe,QAAhB,CAAyBL,GAAzB,CAA6B,SAACQ,IAAD,qBAC5B,KAAC,QAAD,EAA0B,IAAI,CAAEA,IAAhC,CAAsC,YAAY,CAAEhB,YAApD,EAAiBgB,IAAI,CAACN,EAAtB,CAD4B,EAA7B,CADH,EAFF,GADF,CAUD,CAtCD,CAuCA,cAAeb,SAAf"},"metadata":{},"sourceType":"module"}