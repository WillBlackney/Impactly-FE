{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/willi/Desktop/Web Projects/Impactly/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{deleteDoc,doc}from\"firebase/firestore\";import{useRecoilState}from\"recoil\";import{allTasksState}from\"../atoms/TasksAtom\";import{firestore}from\"../firebase/clientApp\";var useTasks=function useTasks(){var _useRecoilState=useRecoilState(allTasksState),_useRecoilState2=_slicedToArray(_useRecoilState,2),tasksStateValue=_useRecoilState2[0],setTasksStateValue=_useRecoilState2[1];var onDeleteTask=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(task){var tasksDocRef;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(\"DELETING Task: \",task.id);_context.prev=1;// delete post from posts collection\ntasksDocRef=doc(firestore,\"tasks\",task===null||task===void 0?void 0:task.id);_context.next=5;return deleteDoc(tasksDocRef);case 5:// Update post state\nsetTasksStateValue(function(prev){return _objectSpread(_objectSpread({},prev),{},{allTasks:prev.allTasks.filter(function(item){return item.id!==task.id;})});});return _context.abrupt(\"return\",true);case 9:_context.prev=9;_context.t0=_context[\"catch\"](1);console.log(\"THERE WAS AN ERROR\",_context.t0);return _context.abrupt(\"return\",false);case 13:case\"end\":return _context.stop();}}},_callee,null,[[1,9]]);}));return function onDeleteTask(_x){return _ref.apply(this,arguments);};}();return{tasksStateValue:tasksStateValue,setTasksStateValue:setTasksStateValue,onDeleteTask:onDeleteTask};};export default useTasks;","map":{"version":3,"names":["deleteDoc","doc","useRecoilState","allTasksState","firestore","useTasks","tasksStateValue","setTasksStateValue","onDeleteTask","task","console","log","id","tasksDocRef","prev","allTasks","filter","item"],"sources":["C:/Users/willi/Desktop/Web Projects/Impactly/my-app/src/hooks/useTasks.tsx"],"sourcesContent":["import { deleteDoc, doc } from \"firebase/firestore\";\r\nimport React from \"react\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { allTasksState, Task } from \"../atoms/TasksAtom\";\r\nimport { firestore} from \"../firebase/clientApp\";\r\nconst useTasks = () => {\r\n  const [tasksStateValue, setTasksStateValue] = useRecoilState(allTasksState);\r\n\r\n  const onDeleteTask = async (task: Task) =>{\r\n    console.log(\"DELETING Task: \", task.id);\r\n\r\n    try {\r\n      // delete post from posts collection\r\n      const tasksDocRef = doc(firestore, \"tasks\", task?.id!);\r\n      await deleteDoc(tasksDocRef);\r\n\r\n      // Update post state\r\n      setTasksStateValue((prev) => ({\r\n        ...prev,\r\n        allTasks: prev.allTasks.filter(\r\n          (item) => item.id !== task.id\r\n        ),\r\n      }));\r\n\r\n      return true;\r\n    } catch (error) {\r\n      console.log(\"THERE WAS AN ERROR\", error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  return{\r\n    tasksStateValue,\r\n    setTasksStateValue,\r\n    onDeleteTask,\r\n  }\r\n};\r\nexport default useTasks;\r\n"],"mappings":"mjBAAA,OAASA,SAAT,CAAoBC,GAApB,KAA+B,oBAA/B,CAEA,OAASC,cAAT,KAA+B,QAA/B,CACA,OAASC,aAAT,KAAoC,oBAApC,CACA,OAASC,SAAT,KAAyB,uBAAzB,CACA,GAAMC,SAAQ,CAAG,QAAXA,SAAW,EAAM,CACrB,oBAA8CH,cAAc,CAACC,aAAD,CAA5D,oDAAOG,eAAP,qBAAwBC,kBAAxB,qBAEA,GAAMC,aAAY,4FAAG,iBAAOC,IAAP,oIACnBC,OAAO,CAACC,GAAR,CAAY,iBAAZ,CAA+BF,IAAI,CAACG,EAApC,EADmB,gBAIjB;AACMC,WALW,CAKGZ,GAAG,CAACG,SAAD,CAAY,OAAZ,CAAqBK,IAArB,SAAqBA,IAArB,iBAAqBA,IAAI,CAAEG,EAA3B,CALN,uBAMXZ,UAAS,CAACa,WAAD,CANE,QAQjB;AACAN,kBAAkB,CAAC,SAACO,IAAD,wCACdA,IADc,MAEjBC,QAAQ,CAAED,IAAI,CAACC,QAAL,CAAcC,MAAd,CACR,SAACC,IAAD,QAAUA,KAAI,CAACL,EAAL,GAAYH,IAAI,CAACG,EAA3B,EADQ,CAFO,IAAD,CAAlB,CATiB,gCAgBV,IAhBU,0DAkBjBF,OAAO,CAACC,GAAR,CAAY,oBAAZ,cAlBiB,gCAmBV,KAnBU,sEAAH,kBAAZH,aAAY,4CAAlB,CAuBA,MAAM,CACJF,eAAe,CAAfA,eADI,CAEJC,kBAAkB,CAAlBA,kBAFI,CAGJC,YAAY,CAAZA,YAHI,CAAN,CAKD,CA/BD,CAgCA,cAAeH,SAAf"},"metadata":{},"sourceType":"module"}